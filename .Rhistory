import keras
import tensorflow as tf
exit
reticulate::repl_python()
py_run_string('import keras')
library(reticulate)
py_run_string('import keras')
library(reticulate)
conda_remove("r-tensorflow")
library(keras)
install_keras()
py_run_string('import keras')
reticulate::repl_python()
reticulate::repl_python()
source_python("code/mnist-keras-function.py")
source_python("code/mnist-keras-function.py")
mnist_function()
reticulate::repl_python()
source_python("code/mnist-keras-function-object.py")
result <- mnist_function()
result
result[1]
reticulate::repl_python()
source_python("code/mnist-keras-function-object-predict.py")
result <- mnist_function()
result
tibble(y_pred = result[0], y_label = result[1])
library(tidyverse)
tibble(y_pred = result[0], y_label = result[1])
result
result %>% class
result[[1]]
tibble(y_pred = result[[0]], y_label = result[[1]])
result[[1]]
result[[1]] %>% class
result[[0]] %>% class
result %>% class
listviewer::jsonedit(result)
result[[0]]
result[0]
result
result[[1]]
y_pred <- result[[1]]
y_pred
y_pred %>% as_tibble()
y_label <- result[[2]]
y_label
y_label %>% as_tibble()
library(tidyverse)
library(magick)
one_img <- image_read("data/captcha_tutorial/1.jpeg")
one_img
file_names <- list.files("data/captcha_tutorial//")
? list.files
file_names <- list.files("data/captcha_tutorial//", pattern = "*.jpeg")
file_names
captcha_labels <- read_csv("data/captcha_tutorial/labels.txt")
captcha_labels <- read_csv("data/captcha_tutorial/labels.txt", col_names = FALSE)
captcha_labels <- read_csv("data/captcha_tutorial/labels.txt", col_names = FALSE) %>%
rename(label = X1)
captcha_labels
file_names <- list.files("data/captcha_tutorial/", pattern = "*.jpeg")
captcha_labels <- read_csv("data/captcha_tutorial/labels.txt", col_names = FALSE) %>%
rename(label = X1)
captcha_df <- tibble(label = captcha_labels,
captcha = glue("data/captcha_tutorial/{file_names}"))
captcha_df
library(glue)
file_names <- list.files("data/captcha_tutorial/", pattern = "*.jpeg")
captcha_labels <- read_csv("data/captcha_tutorial/labels.txt", col_names = FALSE) %>%
rename(label = X1)
captcha_df <- tibble(label = captcha_labels,
captcha = glue("data/captcha_tutorial/{file_names}"))
captcha_df
captcha_df <- tibble(captcha = glue("data/captcha_tutorial/{file_names}")) %>%
bind_cols(captcha_labels)
train_labels <- read_csv("data/captcha_tutorial/labels.txt", col_names = FALSE) %>%
rename(label = X1)
test_labels <- read_csv("data/captcha_tutorial/test.txt", col_names = FALSE) %>%
rename(label = X1)
test_labels
labels_df <- bind_cols(train_labels, test_labels)
labels_df <- bind_rows(train_labels, test_labels)
captcha_df <- tibble(captcha = glue("data/captcha_tutorial/{file_names}")) %>%
bind_cols(labels_df)
library(glue)
file_names <- list.files("data/captcha_tutorial/", pattern = "*.jpeg")
train_labels <- read_csv("data/captcha_tutorial/labels.txt", col_names = FALSE) %>%
rename(label = X1)
test_labels <- read_csv("data/captcha_tutorial/test.txt", col_names = FALSE) %>%
rename(label = X1)
labels_df <- bind_rows(train_labels, test_labels)
captcha_df <- tibble(captcha = glue("data/captcha_tutorial/{file_names}")) %>%
bind_cols(labels_df)
captcha_df
library(glue)
file_names <- list.files("data/captcha_tutorial/", pattern = "*.jpeg")
train_labels <- read_csv("data/captcha_tutorial/labels.txt", col_names = FALSE) %>%
rename(label = X1)
test_labels <- read_csv("data/captcha_tutorial/test.txt", col_names = FALSE) %>%
rename(label = X1)
labels_df <- bind_rows(train_labels, test_labels)
captcha_df <- tibble(captcha = glue("data/captcha_tutorial/{file_names}")) %>%
bind_cols(labels_df)
captcha_df
file_names
file_names[1:5000]
file_names <- list.files("data/captcha_tutorial/", pattern = "*.jpeg")[1:5000]
library(glue)
file_names <- list.files("data/captcha_tutorial/", pattern = "*.jpeg")[1:5000]
train_labels <- read_csv("data/captcha_tutorial/labels.txt", col_names = FALSE) %>%
rename(label = X1)
captcha_df <- tibble(captcha = glue("data/captcha_tutorial/{file_names}")) %>%
bind_cols(train_labels)
captcha_df
captcha_df %>% tail
basename(file_names)
basename(file_names) %>%
str_remove(pattern = ".jpeg")
basename(file_names) %>%
str_remove(pattern = ".jpeg") %>%
str_pad(4, "right", pad=0)
basename(file_names) %>%
str_remove(pattern = ".jpeg") %>%
str_pad(4, "right", pad=0) %>%
str_c(".jpeg")
file_names_seq <- basename(file_names) %>%
str_remove(pattern = ".jpeg") %>%
str_pad(4, "right", pad=0) %>%
str_c(".jpeg")
library(glue)
file_names <- list.files("data/captcha_tutorial/", pattern = "*.jpeg")
file_names_seq <- basename(file_names) %>%
str_remove(pattern = ".jpeg") %>%
str_pad(4, "right", pad=0) %>%
str_c(".jpeg")
train_labels <- read_csv("data/captcha_tutorial/labels.txt", col_names = FALSE) %>%
rename(label = X1)
captcha = glue("data/captcha_tutorial/{file_names}")
tibble(filename = file_names_seq) %>%
bind_cols(train_labels)
tibble(filename = file_names_seq)
filename <- list.files("data/captcha_tutorial/", pattern = "*.jpeg")
file_names_seq <- basename(filename) %>%
str_remove(pattern = ".jpeg") %>%
str_pad(4, "right", pad=0) %>%
str_c(".jpeg")
tibble(filename = filename,
filename_seq = file_names_seq)
file_names_seq <- basename(filename) %>%
str_remove(pattern = ".jpeg") %>%
str_pad(4, "left", pad=0) %>%
str_c(".jpeg")
tibble(filename = filename,
filename_seq = file_names_seq)
tibble(filename = filename,
filename_seq = file_names_seq) %>%
slice(1:5000)
tibble(filename = filename,
filename_seq = file_names_seq) %>%
slice(1:5000) %>%
bind_cols(train_labels)
file_names_seq <- basename(filename) %>%
str_remove(pattern = ".jpeg") %>%
as.integer()
tibble(filename = filename,
filename_seq = file_names_seq) %>%
slice(1:5000) %>%
bind_cols(train_labels)
tibble(filename = filename,
filename_seq = file_names_seq) %>%
arrange(file_names_seq)
slice(1:5000) %>%
bind_cols(train_labels)
tibble(filename = filename,
filename_seq = file_names_seq) %>%
arrange(file_names_seq) %>%
slice(1:5000) %>%
bind_cols(train_labels)
tibble(filename = filename,
filename_seq = file_names_seq) %>%
arrange(file_names_seq) %>%
slice(1:5000) %>%
bind_cols(train_labels) %>%
mutate(image = glue("data/captcha_tutorial/{filename_seq}.jpeg"))
captcha_df <- tibble(filename = filename,
filename_seq = file_names_seq) %>%
arrange(file_names_seq) %>%
slice(1:5000) %>%
bind_cols(train_labels) %>%
mutate(image = glue("data/captcha_tutorial/{filename_seq}.jpeg"))
captcha_df
captcha_df %>% tail
library(trelliscopejs)
captcha_sample <- captcha_df %>%
sample_n(100) %>%
mutate(label = as.character(label)) %>%
mutate(panel = img_panel_local(image))
trelliscope(captcha_sample, name = "captcha_tutorial",
nrow = 3, ncol = 7,
state = list(labels = c("label")),
path="captcha_tutorial")
install.packages("trelliscopejs")
library(trelliscopejs)
captcha_sample <- captcha_df %>%
sample_n(100) %>%
mutate(label = as.character(label)) %>%
mutate(panel = img_panel_local(image))
trelliscope(captcha_sample, name = "captcha_tutorial",
nrow = 3, ncol = 7,
state = list(labels = c("label")),
path="captcha_tutorial")
captcha_df %>% tail
captcha_sample
captcha_sample
captcha_sample <- captcha_df %>%
sample_n(100) %>%
mutate(label = as.character(label)) %>%
mutate(panel = img_panel_local(image))
trelliscope(captcha_sample, name = "captcha_tutorial",
nrow = 3, ncol = 7,
state = list(labels = c("label")),
path="captcha_tutorial")
trelliscope(captcha_sample, name = "captcha_tutorial",
nrow = 3, ncol = 7,
state = list(labels = c("label")),
path="captcha_tutorial")
trelliscope(captcha_sample, name = "captcha_tutorial",
nrow = 3, ncol = 7,
state = list(labels = c("label")),
path="captcha_tutorial")
library(trelliscopejs)
captcha_sample <- captcha_df %>%
# sample_n(100) %>%
mutate(label = as.character(label)) %>%
mutate(panel = img_panel_local(image))
trelliscope(captcha_sample, name = "captcha_tutorial",
nrow = 3, ncol = 7,
state = list(labels = c("label")),
path="captcha_tutorial")
captcha_sample
captcha_sample <- captcha_df %>%
# sample_n(100) %>%
mutate(label = as.character(label)) %>%
mutate(image = as.character(image)) %>%
mutate(panel = img_panel_local(image))
trelliscope(captcha_sample, name = "captcha_tutorial",
nrow = 3, ncol = 7,
state = list(labels = c("label")),
path="captcha_tutorial")
captcha_sample
? img_panel_local
captcha_sample <- captcha_df %>%
# sample_n(100) %>%
mutate(label = as.character(label)) %>%
mutate(image = as.character(image)) %>%
mutate(img = img_panel_local(image))
trelliscope(captcha_sample, name = "captcha_tutorial",
nrow = 3, ncol = 7,
state = list(labels = c("label")),
path="captcha_tutorial")
one_img <- image_read(" data/captcha_tutorial/9.jpeg")
one_img <- image_read(" data/captcha_tutorial/9.jpeg")
one_img <- image_read("data/captcha_tutorial/9.jpeg")
one_img
trelliscope(captcha_sample, name = "captcha_tutorial",
nrow = 3, ncol = 7,
path="captcha_tutorial")
captcha_sample <- captcha_df %>%
sample_n(100) %>%
mutate(label = as.character(label),
image = as.character(image),
panel = img_panel_local(image))
trelliscope(captcha_sample, name = "captcha_tutorial",
nrow = 3, ncol = 7,
path="captcha_tutorial")
? trelliscope
trelliscope(captcha_sample, name = "captcha_tutorial",
nrow = 3, ncol = 7,
path="captcha_tutorial",
panel_col = c("label")
)
trelliscope(captcha_sample, name = "captcha_tutorial",
nrow = 3, ncol = 7,
path="captcha_tutorial",
panel_col = list(c("label"))
)
trelliscope(captcha_sample, name = "captcha_tutorial",
nrow = 3, ncol = 7,
path="captcha_tutorial",
panel_col = list(labels = c("label"))
)
trelliscope(captcha_sample, name = "captcha_tutorial",
nrow = 3, ncol = 7,
path="captcha_tutorial",
state = list(labels = c("label"))
)
trelliscope(captcha_sample, name = "captcha_tutorial",
nrow = 3, ncol = 7,
path="captcha_tutorial",
state = list(labels = c("label", "panel"))
)
trelliscope(captcha_sample, name = "captcha_tutorial",
nrow = 3, ncol = 7,
path="captcha_tutorial",
panel_col =  label,
)
trelliscope(captcha_sample, name = "captcha_tutorial",
nrow = 3, ncol = 7,
path="captcha_tutorial",
panel_col =  "label",
)
trelliscope(captcha_sample, name = "captcha_tutorial",
nrow = 3, ncol = 7,
path="captcha_tutorial",
list(sort = list(sort_spec("cty_mean")))
)
trelliscope(captcha_sample, name = "captcha_tutorial",
nrow = 3, ncol = 7,
path="captcha_tutorial",
list(sort = list(sort_spec("label")))
)
trelliscope(captcha_sample, name = "captcha_tutorial",
nrow = 3, ncol = 7,
path="captcha_tutorial",
list(sort = list("label"))
)
trelliscope(captcha_sample, name = "captcha_tutorial",
nrow = 3, ncol = 7,
path="captcha_tutorial",
list(label = list("label"))
)
trelliscope(captcha_sample, name = "captcha_tutorial",
nrow = 3, ncol = 7,
path="captcha_tutorial",
state = list(sort = list(sort_spec("label")))
)
trelliscope(captcha_sample, name = "captcha_tutorial",
nrow = 3, ncol = 7,
path="captcha_tutorial",
state = list(label = list("label"))
)
trelliscope(captcha_sample, name = "captcha_tutorial",
nrow = 3, ncol = 7,
path="captcha_tutorial",
state = list(label = c("label"))
)
trelliscope(captcha_sample, name = "captcha_tutorial",
nrow = 3, ncol = 7,
path="captcha_tutorial",
state = list(label = c("label"))
)
trelliscope(captcha_sample, name = "captcha_tutorial",
nrow = 3, ncol = 7,
path="captcha_tutorial",
state = list(labels = c("label"))
)
library(trelliscopejs)
captcha_sample <- captcha_df %>%
sample_n(100) %>%
mutate(label = as.character(label),
image = as.character(image),
panel = img_panel_local(image))
trelliscope(captcha_sample, name = "captcha_tutorial",
nrow = 3, ncol = 7,
path="captcha_tutorial"
)
library(tidyverse)
library(slickR)
library(tidyverse)
library(slickR)
mnist_pdf <- pdftools::pdf_convert("data/1702.05373v1.pdf",format = 'png',verbose = FALSE)
slickR(mnist_pdf, height = 500)
library(tidyverse)
library(slickR)
mnist_pdf <- pdftools::pdf_convert("data/1702.05373v1.pdf",format = 'png',verbose = FALSE)
slickR(mnist_pdf, height = 500)
brew install libmagic
library(tidyverse)
library(slickR)
mnist_pdf <- pdftools::pdf_convert("data/1702.05373v1.pdf",format = 'png',verbose = FALSE)
slickR(mnist_pdf, height = 500)
bottom_opts <- settings(arrows = FALSE,
slidesToShow = 3,
slidesToScroll = 1,
centerMode = TRUE,
focusOnSelect = TRUE,
initialSlide = 0)
slickR(mnist_pdf, height = 800) %synch%
(slickR(mnist_pdf,height = 100) + bottom_opts)
bottom_opts <- settings(arrows = TRUE,
slidesToShow = 3,
slidesToScroll = 1,
centerMode = TRUE,
focusOnSelect = TRUE,
initialSlide = 0)
slickR(mnist_pdf, height = 800) %synch%
(slickR(mnist_pdf,height = 100) + bottom_opts)
library(glue)
file_names <- list.files("data/captcha_dataset/")
captcha_labels <- str_extract(file_names, "[\\w\\d]+?(?=\\.)")
captcha_df <- tibble(label = captcha_labels,
captcha = glue("data/captcha_dataset/{file_names}"))
captcha_df
captcha_df <- tibble(label = captcha_labels,
captcha = glue("data/captcha_dataset/{file_names}"),
score = runif(1070, min = 0, max = 1))
captcha_df
opts <- settings(
dots = TRUE,
initialSlide = 0,
slidesToShow = 5,
slidesToScroll = 5,
focusOnSelect = TRUE)
slickR(obj = captcha_df$captcha, height = 100, width = "95%") +
opts
captcha_num <- htmlwidgets::JS("function(slick,index) {
return '<a>'+(index+1)+'</a>';
}")
captcha_opts <- settings(
dots = TRUE,
initialSlide = 0,
slidesToShow = 10,
slidesToScroll = 10,
focusOnSelect = TRUE,
customPaging = captcha_num)
slickR(obj = captcha_df$captcha, height = 100, width = "100%")
%synch%
( slickR(captcha_df$label, slideType = 'p') + captcha_opts )
captcha_num <- htmlwidgets::JS("function(slick,index) {
return '<a>'+(index+1)+'</a>';
}")
captcha_opts <- settings(
dots = TRUE,
initialSlide = 0,
slidesToShow = 10,
slidesToScroll = 10,
focusOnSelect = TRUE,
customPaging = captcha_num)
slickR(obj = captcha_df$captcha, height = 100, width = "100%") %synch%
( slickR(captcha_df$label, slideType = 'p') + captcha_opts )
captcha_num <- htmlwidgets::JS("function(slick,index) {
return '<a>'+(index+1)+'</a>';
}")
captcha_opts <- settings(
dots = TRUE,
initialSlide = 0,
slidesToShow = 10,
slidesToScroll = 10,
focusOnSelect = TRUE,
customPaging = captcha_num)
slickR(obj = captcha_df$captcha, height = 100, width = "100%") %synch%
( slickR( captcha_df$label ) + captcha_opts )
captcha_num <- htmlwidgets::JS("function(slick,index) {
return '<a>'+(index+1)+'</a>';
}")
captcha_opts <- settings(
dots = TRUE,
initialSlide = 0,
slidesToShow = 10,
slidesToScroll = 10,
focusOnSelect = TRUE,
customPaging = captcha_num)
slickR(obj = captcha_df$captcha, height = 100, width = "100%") %synch%
( slickR(captcha_df$label, slideType = 'p') + captcha_opts ) %synch%
( slickR(captcha_df$score, slideType = 'p') + captcha_opts )
slickR(obj = nba_player_logo$uri[1:2], height = 100, width = "95%") %synch%
( slickR(nba_player_logo$name[1:2], slideType = 'p') + settings(arrows = TRUE) )
captcha_num <- htmlwidgets::JS("function(slick,index) {
return '<a>'+(index+1)+'</a>';
}")
captcha_opts <- settings(
dots = TRUE,
initialSlide = 0,
slidesToShow = 10,
slidesToScroll = 10,
focusOnSelect = TRUE,
customPaging = captcha_num,
arrows = FALSE)
slickR(obj = captcha_df$captcha, height = 100, width = "100%") %synch%
( slickR(captcha_df$label, slideType = 'p') + captcha_opts )
library(pdftools)
? pdf_convert
mnist_pdf <- pdf_convert("data/1702.05373v1.pdf",format = 'png',verbose = FALSE)
mnist_pdf
path_mnist_pdf <- glue::glue("data/{mnist_pdf}")
slickR(mnist_pdf, height = 600)
mnist_pdf <- pdf_convert("data/1702.05373v1.pdf",format = 'png',verbose = FALSE)
path_mnist_pdf <- glue::glue("data/{mnist_pdf}")
mnist_pdf_df <- tibble(page = glue::glue("data/{mnist_pdf}") )
